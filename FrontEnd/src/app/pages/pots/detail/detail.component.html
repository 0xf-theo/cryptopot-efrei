<app-page [title]="pot?.name || ''">
    <div class="cause_details_area pt-120 pb-80">
        <div class="container">
            <div class="row">
                <div class="col-xxl-8 col-xl-8 col-lg-7">
                    <div class="single_details_wrapper mb-40">
                        <div class="single_details_img">
                            <img [src]="pot?.image || 'assets/img/causes/cause_sbig.jpg'" alt="img">
                        </div>
                        <div class="single_details_content">
                            <div class="single_donation_content single_border pb-45 mb-45">
                                <div class="section_title">
                                    <a href="#" class="sub_title_details line_h2_2">{{association?.activity}}</a>
                                </div>
                                <p>{{pot?.description}} </p>
                                <div class="feature_progress_wrapper mb-25 mt-35">
                                    <div class="progress feature_progress">
                                        <div class="progress-bar" role="progressbar" data-width="50%" aria-valuenow="30"
                                            aria-valuemin="0" aria-valuemax="100"
                                            [style]="'width: ' + ((pot?.amount_paid || 0) / (pot?.target_amount || 1) * 100 | number : '1.0-0') + '%'">
                                        </div>
                                    </div>
                                </div>
                                <div class="single_cause_meta">
                                    <div class="single_meta feature_meta feature_border d-inline-block">
                                        <span class="meta_text clr_theme1"><i class="fal fa-globe"></i> Goal</span>
                                        <span class="meta_price single_price clr_theme1">{{pot?.target_amount}}$</span>
                                    </div>
                                    <div class="single_meta feature_meta feature_border d-inline-block">
                                        <span class="meta_text clr_theme2"><i class="fal fa-users"></i> Raised</span>
                                        <span class="meta_price single_price clr_theme2">{{pot?.amount_paid}}$</span>
                                    </div>
                                    <div class="single_meta feature_meta d-inline-block">
                                        <span class="meta_text clr_theme3"><i class="fal fa-reply"></i> To go</span>
                                        <span class="meta_price single_price clr_theme3">{{(pot?.target_amount || 0) -
                                            (pot?.amount_paid || 0)}}$</span>
                                    </div>
                                </div>
                            </div>
                            Contract address : {{pot?.contract_address}} <br />
                            See on explorer : <a
                                [href]="'https://testnet-explorer-v2.xai-chain.net/address/' + pot?.contract_address">https://testnet-explorer-v2.xai-chain.net/address/{{pot?.contract_address}}</a>
                        </div>
                    </div>
                    <div class="single_details_wrapper mb-40">
                        <h3>{{transactions.length}} donations</h3>
                        <div class="card" *ngFor="let tx of transactions">
                            <div class="card-body" style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <blockquote>{{tx.message}}</blockquote>
                                    <small>by <a [href]="'https://testnet-explorer-v2.xai-chain.net/address/'+tx.public_address">{{tx.public_address}}</a> <br /> hash: <a
                                            [href]="'https://testnet-explorer-v2.xai-chain.net/tx/'+tx.transaction_id">{{tx.transaction_id}}</a></small>
                                </div>
                                <div>
                                    {{tx.amount}} USDC (={{tx.amount | currency }})
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xxl-4 col-xl-4 col-lg-5">
                    <div class="single_sidebar_wrapper pl-15 mb-40">

                        <div class="single_widget has_border person_widget text-center mb-40">
                            <div class="widget_person_img" *ngIf="association?.image">
                                <img [src]="association?.image" alt="img">
                            </div>
                            <div class="person_designation widget_mb25">
                                <h4>{{association?.name}}</h4>
                            </div>

                        </div>

                    </div>
                    <div class="single_sidebar_wrapper pl-15 mb-40">
                        <div class="single_widget has_border person_widget text-center mb-40">
                            <div class="single_donation_info">
                                <div class="submit_info_wrapper d-sm-inline-flex flex-column">
                                    <span *ngIf="!pot?.contract_address">Crypto donation not available</span>
                                    <div class="submit_info_button" style="padding-top: 20px;"
                                        *ngIf="pot?.contract_address">
                                        <a [href]="'/donation?name='+pot?.name+'&contract='+pot?.contract_address"
                                            class="g_btn hbtn_1 to_right1 i_left rad-30">Donate
                                            Now<span></span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</app-page>